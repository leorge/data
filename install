PIVOT=n1n1.awk
if [ -d .git ] && [ -x $PIVOT ]; then   # in the repository
    git pull
    if ! echo :$PATH: | grep :`pwd`: > /dev/null ; then
        echo PATH=\$PATH:`pwd` >> ~/.profile
        echo Logout and login again.
    fi
    exit
elif which $PIVOT > /dev/null; then
    echo $PIVOT is available. Searching $PIVOT ...
    for cmd in `find / -name $PIVOT -print 2>/dev/null`; do
        echo $cmd; cd `dirname $cmd`
        if [ -d .git ]; then
            echo A repository is found.
            git pull
            if [ -x $PIVOT ]; then
                bash `basename $0`  # recursive call
                rm $0
                exit
            fi
        fi
    done
    echo There is no appropriate repository.
    rm `which $PIVOT`
    bash $0  # retry
elif [ -d data ]; then  # the repository may exist
    pushd data && bash `basename $0` && popd && rm $0  # recursive call
else
    INSTALLER=inst_cmd
    if ! which $INSTALLER > /dev/null; then  # not installed.
        TMP=/tmp
        wget -N -P $TMP https://github.com/leorge/scripts/raw/master/$INSTALLER
        chmod +x $TMP/$INSTALLER
        PATH=$PATH:$TMP  # temporarily
    fi
    $INSTALLER git gawk perl
    git clone https://github.com/leorge/data.git
    pushd data && bash `basename $0` && popd && rm $0  # recursive call
fi
